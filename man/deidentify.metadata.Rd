% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/source_deidentification.R
\name{deidentify.metadata}
\alias{deidentify.metadata}
\title{De-identify tabular imaging metadata files}
\usage{
deidentify.metadata(
  source.dir,
  tokenfile,
  dateshiftfile,
  filename.pattern,
  deident.dir = file.path(source.dir, "deidentified"),
  overwrite = TRUE,
  verbose = TRUE,
  ...
)
}
\arguments{
\item{source.dir}{Character string. Directory containing metadata files
to be de-identified.}

\item{tokenfile}{Character string. Path to the token crosswalk file
mapping original identifiers (e.g., MRNs) to de-identified tokens.
See \code{\link{loadxwalks}}.}

\item{dateshiftfile}{Character string. Path to the date-shift crosswalk
file defining patient-specific date offsets. See \code{\link{loadxwalks}}.}

\item{filename.pattern}{Character string. Regular expression used to
select files in \code{source.dir} for processing.}

\item{deident.dir}{Character string. Output directory for de-identified
files. Defaults to a subdirectory named \code{"deidentified"} within
\code{source.dir}. Created if it does not exist.}

\item{overwrite}{Logical scalar. If \code{FALSE} the function
stops with an error if an output file already exists. If \code{TRUE}
(default), existing files are overwritten.}

\item{verbose}{Logical scalar. If \code{TRUE} (default), progress
messages are printed during processing.}

\item{...}{Additional arguments passed to \code{fileDeID()} controlling
device-specific behavior such as:
\itemize{
\item Identifier variable name
\item Date variables to shift
\item Date/time formats
\item Variables to remove
\item Input and output separators
}}
}
\value{
Invisibly returns a character vector containing the full paths of the
generated de-identified files.
}
\description{
De-identifies tabular metadata exports by replacing identifiers and
shifting date/time variables according to token and date-shift
crosswalk files.
}
\details{
The function scans a source directory for files matching a regular
expression pattern, applies de-identification via \code{fileDeID()},
and writes the processed files to an output directory.

De-identification is performed by:
\enumerate{
\item Loading identifier and date-shift crosswalks using
\code{loadxwalks()}.
\item Selecting files in \code{source.dir} matching
\code{filename.pattern}.
\item Applying \code{fileDeID()} to each file.
\item Writing results to \code{deident.dir}.
}

Date and datetime shifting behavior depends on arguments passed via
\code{...}. Device-specific wrapper functions such as
\code{deidentify.spectralis.raw()} provide predefined configurations.
}
\seealso{
\code{\link{fileDeID}},
\code{\link{deidentify.spectralis.raw}},
\code{\link{deidentify.spectralis.pdf}},
\code{\link{deidentify.cirrus}},
\code{\link{deidentify.hfa}}
}
